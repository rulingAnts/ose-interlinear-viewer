<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One-Story Editor Interlinearizer</title>
</head>
<body>
  <div id="browserWarning" style="color: red;">
    Warning: You appear to be using an unsupported browser. Also make sure JavaScript is not disabled. This app likely will not work with your current browser and settings. Please use Microsoft Edge, Google Chrome, or Safari or <a href="https://github.com/rulingAnts/ose-interlinear-viewer/releases/latest">download the latest Windows version</a> of this app.
  </div>
  <center style="margin-top:30px;">
<table>
  <thead>
    <tr><th><h1>OneStory Story Interlinearizer</h1></th></tr>
    <tr><th>Select Export Format...</th></tr>
  </thead>
  <tbody>
    <tr><td><button onclick="navigateTo('./xlingpaper.html');">XLingPaper</button></td></tr>
    <tr><td><button onclick="navigateTo('./html.html');">Web Page</button></td></tr>
    <tr hidden><td><button onclick="navigateTo('./word-writer.html');">OpenOffice Writer/MS Word</button></td></tr>
  </tbody>
  </table></center>

<span hidden><pre id="output"></pre></span>
</body>
<script>
// Check if the browser is supported (Chromium-based, Electron, or WebKit)
function isSupportedBrowser() {
      if (navigator.userAgentData && navigator.userAgentData.brands) {
        // Check if the browser is Chrome, Edge, or Safari
        var isChromiumBased =
          navigator.userAgentData.brands.some((brand) =>
            ["Google Chrome", "Microsoft Edge", "Apple", "Chromium"].includes(brand.brand)
          ) ||
          (navigator.userAgentData.mobile &&
            navigator.userAgentData.mobile.brands.some((brand) =>
              ["Google Chrome", "Microsoft Edge", "Safari", "Chromium"].includes(brand.brand)
            ));

        if (!isChromiumBased) {
          console.log("UserAgentData:", JSON.stringify(navigator.userAgentData));
        }

        return isChromiumBased;
      } else {
        // Fallback to checking userAgent
        var userAgent = navigator.userAgent.toLowerCase();
        var isSupported =
          userAgent.includes("edg") ||
          userAgent.includes("chrome") ||
          userAgent.includes("safari") ||
          userAgent.includes("electron") || // Check for Electron
          userAgent.includes("applewebkit"); // Check for WebKit

        if (!isSupported) {
          console.log("UserAgent:", userAgent);
        }

        return isSupported;
      }
    }

    // Remove warning content if supported browser
    function removeWarningIfSupportedBrowser() {
      if (isSupportedBrowser()) {
        var warningDiv = document.getElementById("browserWarning");
        if (warningDiv) {
          warningDiv.innerHTML = ""; // Remove the content of the warning div
          window.location.href = "https://github.com/rulingAnts/ose-interlinear-viewer/releases/latest";
        }
      }
    }

    // Call the function when the page is loaded
    removeWarningIfSupportedBrowser();
</script>
</html>